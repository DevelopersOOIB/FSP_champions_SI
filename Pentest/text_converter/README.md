# Описание: 
Таска на пентест с такими уязвимостями: Secret data leak, Secrets leak, Repo Leak, Blind OS Command Inkection, Mounted docker.dock, CI\CD attack (pul private repository). 


# Writeup 

1. Заходим на сайт, видим приложеньку переводчик
2. Cканить dirb`ом находим эндоинты /translate и /console но они ничего не дают
3. Увидели .git в папке, дергаем его git-dumper утилитой
4. Открываем папку и видим файлы репы: файлы deploy.sh, Dockerfile, папку app с сорцами приложения (где находим закрытый эндопоинт  /api/helthcheck где будет Blind OS Command injection в функцию os.system(), но она за авторизацией через токен, который берется из энвов приложения, все секурно;)
5. Видим файл deploy.sh и видим в нем креды к реджистри докерхаба, дергаем их, логинимся туда и пулим себе образ по имени образа из скрипта
6. Далее запускаем контейнер из образа, падаем вовнутрь шелла контейнера и оглядываемся, по докефайлу с предыдущего этапа понятно, что все файлы лежат в /var/www/html заходим туда и видим .env файл, с авторизационным токеном, дергаем его себе и пывним тачку передав команду на реверс шелл (для простоты поднял на альпайне там есть netcat с ключом -e)
7. Осматриваемся, понимаем, что мы рут, но в контейнере, запускаем линпис и видим смонтированный докер сокет
8. Льем туда докер клиент либо же curl`ом кто как запускаем контейнер с монтированием хостового рута в папку
9. Падаем вовнутрь нового контейнера заходим в папку где смонтировали рут chroot`ом для удобства или просто сразу в /root и забираем флаг flag.txt

# Flag
flag{4w$3om_P3n73$7_74$k}
