
let lang_value_current = 'ru';
let langValueTranslate = 'en';

const langDiv = document.querySelector('.lang');
if (!langDiv) {
    console.error("Element with class '.lang' not found!");
} else {
    const russianP= langDiv.querySelector('#ru');
    const englishP = langDiv.querySelector('#en');
    const button = langDiv.querySelector('button');
    const inputLang = document.getElementById('inputLang');
    const outLang = document.getElementById('outLang');
    const switchTextForm = document.getElementById('textareaInput')
    const switchTestFormReverse = document.getElementById('textareaOutput')
    let swapped = false;

    button.addEventListener('click', (event) => {
        event.preventDefault();
        event.stopPropagation();
        swapped = !swapped;

        if (swapped) {
                    
            langDiv.insertBefore(englishP, russianP);
            inputLang.value = 'en';
            outLang.value = 'ru';
            switchTextForm.value = '';
        } else {
            langDiv.insertBefore(russianP, englishP);
            inputLang.value = 'ru';
            outLang.value = 'en';
            switchTextForm.value = '';
        }

        //Added this line to fix position of button
        langDiv.appendChild(button);
    });
}

    document.getElementById('textareaInput').addEventListener('input', async function(event) {
    event.preventDefault(); // Останавливаем стандартное поведение формы

    // Получаем данные формы
    const formData = new FormData(myForm);

    try {
        const response = await fetch('http://194.87.118.161/translate', {
            method: 'POST',
            body: formData,
            mode: 'no-cors'
        });

        if (!response.ok) {
            throw new Error('Сеть не в порядке: ' + response.statusText);
        }

        // Получаем ответ от сервера
        const data = await response.json();
        console.log(data)
        // Обрабатываем ответ (например, выводим его на экран)
        document.getElementById('textareaOutput').innerText = data.response;
    } catch (error) {
        console.error('Ошибка:', error);
        document.getElementById('textareaOutput').innerText = 'Ошибка: ' + error.message;
    }
});

